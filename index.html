<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nerdy Creativity</title>
    <meta name="description" content="Website for me, a nerd who likes to create things.">
    <link rel="alternate" href="/eleventy-base-blog/feed/feed.xml" type="application/atom+xml" title="Nerdy Creativity">
    
    
    
    <style>
      /* This is an arbitrary CSS string added to the bundle */
/* Defaults */
:root {
  --font-family: -apple-system, system-ui, sans-serif;
  --font-family-monospace: Consolas, Menlo, Monaco, Andale Mono WT, Andale Mono,
    Lucida Console, Lucida Sans Typewriter, DejaVu Sans Mono,
    Bitstream Vera Sans Mono, Liberation Mono, Nimbus Mono L, Courier New,
    Courier, monospace;
}

/* Theme colors */
:root {
  --color-gray-10: #f0f0f0;
  --color-gray-20: #e0e0e0;
  --color-gray-50: #c0c0c0;
  --color-gray-90: #333333;

  --background-color: #fff;

  --text-color: var(--color-gray-90);
  --text-color-link: #dda15e;
  --text-color-link-active: #bc6c25;
  --text-color-link-visited: #758543;

  --syntax-tab-size: 2;
  --primary: #ccd5ae;
}

/* https://coolors.co/palette/606c38-283618-fefae0-dda15e-bc6c25
["#606c38","#283618","#fefae0","#dda15e","#bc6c25"] */

@media (prefers-color-scheme: dark) {
  :root {
    --color-gray-10: #f0f0f0;
    --color-gray-20: #e0e0e0;
    --color-gray-50: #c0c0c0;
    --color-gray-90: #dad8d8;

    /* --text-color is assigned to --color-gray-_ above */
    --text-color-link: #1493fb;
    --text-color-link-active: #6969f7;
    --text-color-link-visited: #a6a6f8;

    --background-color: #15202b;
  }
}

/* Global stylesheet */
* {
  box-sizing: border-box;
}

html,
body {
  padding: 0;
  margin: 0 auto;
  font-family: var(--font-family);
  color: var(--text-color);
  background-color: var(--background-color);
}
html {
  overflow-y: scroll;
}

/* https://www.a11yproject.com/posts/how-to-hide-content/ */
.visually-hidden {
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  position: absolute;
  white-space: nowrap;
  width: 1px;
}

p:last-child {
  margin-bottom: 0;
}
p {
  line-height: 1.5;
}

li {
  line-height: 1.5;
}

a[href] {
  color: var(--text-color-link);
}
a[href]:visited {
  color: var(--text-color-link-visited);
}
a[href]:hover,
a[href]:active {
  color: var(--text-color-link-active);
}

main {
  padding: 1rem;
}
main :first-child {
  margin-top: 0;
}

.links-nextprev {
  list-style: none;
  border-top: 1px dashed var(--color-gray-20);
  padding: 1em 0;
}

table {
  margin: 1em 0;
}
table td,
table th {
  padding-right: 1em;
}

pre,
code {
  font-family: var(--font-family-monospace);
}
pre:not([class*="language-"]) {
  margin: 0.5em 0;
  line-height: 1.375; /* 22px /16 */
  -moz-tab-size: var(--syntax-tab-size);
  -o-tab-size: var(--syntax-tab-size);
  tab-size: var(--syntax-tab-size);
  -webkit-hyphens: none;
  -ms-hyphens: none;
  hyphens: none;
  direction: ltr;
  text-align: left;
  white-space: pre;
  word-spacing: normal;
  word-break: normal;
}
code {
  word-break: break-all;
  padding: 0.1rem 0.3rem;
  background-color: var(--color-gray-10);
  border-radius: 6px;
}

/* ===============================
layout
=============================== */

main,
header {
  max-width: 960px;
  margin: 0 auto;
}

/* ===============================
header
=============================== */

header {
  box-shadow: 0px 1px 5px var(--color-gray-50);
}

header {
  display: flex;
  gap: 1em 0.5em;
  flex-wrap: wrap;
  align-items: center;
  padding: 1em;
}
.home-link {
  font-size: 1em; /* 16px /16 */
  font-weight: 700;
  margin-right: 2em;
}
.home-link:link:not(:hover) {
  text-decoration: none;
}

/* ===============================
Markdown header links
=============================== */

.header-anchor {
  text-decoration: none;
  font-style: normal;
  font-size: 1em;
  margin-left: 0.1em;
}
a[href].header-anchor,
a[href].header-anchor:visited {
  color: transparent;
}
a[href].header-anchor:focus,
a[href].header-anchor:hover {
  text-decoration: underline;
}
a[href].header-anchor:focus,
:hover > a[href].header-anchor {
  color: #aaa;
}

h2 + .header-anchor {
  font-size: 1.5em;
}

/* ===============================
nav
=============================== */

.nav {
  display: flex;
  padding: 0;
  margin: 0;
  list-style: none;
}
.nav-item {
  display: inline-block;
  margin-right: 1em;
}
.nav-item a[href]:not(:hover) {
  text-decoration: none;
}
.nav a[href][aria-current="page"] {
  text-decoration: underline;
}

.nav-item a[href] {
  color: var(--text-color-link-visited);
}

/* ===============================
 posts lists
=============================== */

.postlist {
  padding: 0;
}
.postlist-item {
  display: flex;
  flex-wrap: wrap;
  align-items: baseline;
  margin-bottom: 1em;
}

.postlist-date,
.postlist-item:before {
  font-size: 0.8125em; /* 13px /16 */
  color: var(--color-gray-90);
}
.postlist-date {
  word-spacing: -0.5px;
}
.postlist-link {
  font-size: 1.1875em; /* 19px /16 */
  font-weight: 700;
  flex-basis: calc(100% - 1.5rem);
  padding-left: 0.25em;
  padding-right: 0.5em;
  text-underline-position: from-font;
  text-underline-offset: 0;
  text-decoration-thickness: 1px;
}
.postlist-item-active .postlist-link {
  font-weight: bold;
}

/* ===============================
 posts tags
=============================== */

.post-tag {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  text-transform: capitalize;
  font-style: italic;
}
.postlist-item > .post-tag {
  align-self: center;
}

/* ===============================
 posts
=============================== */

.post {
  /* margin:2rem 0; */
  padding: 2rem 0;
  /* background-color: #a6a6f8; */
  /* border-top: 1px dashed var(--color-gray-50); */
}

.separator {
  border: none;
  height: 1px;
  background: repeating-linear-gradient(
    90deg,
    transparent,
    transparent 5px,
    var(--color-gray-50) 5px,
    var(--color-gray-50) 10px
  );
}

h1.post-title a {
  text-decoration: none;
  color: var(--text-color);
}

h1.post-title a:visited {
  color: var(--text-color);
}

h1.post-title a:active,
h1.post-title a:hover {
  text-decoration: underline;
}

.post-metadata {
  display: inline-flex;
  flex-wrap: wrap;
  gap: 0.5em;
  list-style: none;
  padding: 0;
  margin: 0;
}
.post-metadata time {
  margin-right: 1em;
}
/**
 * okaidia theme for JavaScript, CSS and HTML
 * Loosely based on Monokai textmate theme by http://www.monokai.nl/
 * @author ocodia
 */

code[class*="language-"],
pre[class*="language-"] {
	color: #f8f8f2;
	background: none;
	text-shadow: 0 1px rgba(0, 0, 0, 0.3);
	font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
	font-size: 1em;
	text-align: left;
	white-space: pre;
	word-spacing: normal;
	word-break: normal;
	word-wrap: normal;
	line-height: 1.5;

	-moz-tab-size: 4;
	-o-tab-size: 4;
	tab-size: 4;

	-webkit-hyphens: none;
	-moz-hyphens: none;
	-ms-hyphens: none;
	hyphens: none;
}

/* Code blocks */
pre[class*="language-"] {
	padding: 1em;
	margin: .5em 0;
	overflow: auto;
	border-radius: 0.3em;
}

:not(pre) > code[class*="language-"],
pre[class*="language-"] {
	background: #272822;
}

/* Inline code */
:not(pre) > code[class*="language-"] {
	padding: .1em;
	border-radius: .3em;
	white-space: normal;
}

.token.comment,
.token.prolog,
.token.doctype,
.token.cdata {
	color: #8292a2;
}

.token.punctuation {
	color: #f8f8f2;
}

.token.namespace {
	opacity: .7;
}

.token.property,
.token.tag,
.token.constant,
.token.symbol,
.token.deleted {
	color: #f92672;
}

.token.boolean,
.token.number {
	color: #ae81ff;
}

.token.selector,
.token.attr-name,
.token.string,
.token.char,
.token.builtin,
.token.inserted {
	color: #a6e22e;
}

.token.operator,
.token.entity,
.token.url,
.language-css .token.string,
.style .token.string,
.token.variable {
	color: #f8f8f2;
}

.token.atrule,
.token.attr-value,
.token.function,
.token.class-name {
	color: #e6db74;
}

.token.keyword {
	color: #66d9ef;
}

.token.regex,
.token.important {
	color: #fd971f;
}

.token.important,
.token.bold {
	font-weight: bold;
}
.token.italic {
	font-style: italic;
}

.token.entity {
	cursor: help;
}
/*
 * New diff- syntax
 */

pre[class*="language-diff-"] {
  --eleventy-code-padding: 1.25em;
  padding-left: var(--eleventy-code-padding);
  padding-right: var(--eleventy-code-padding);
}
.token.deleted {
  background-color: hsl(0, 51%, 37%);
  color: inherit;
}
.token.inserted {
  background-color: hsl(126, 31%, 39%);
  color: inherit;
}

/* Make the + and - characters unselectable for copy/paste */
.token.prefix.unchanged,
.token.prefix.inserted,
.token.prefix.deleted {
  -webkit-user-select: none;
  user-select: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding-top: 2px;
  padding-bottom: 2px;
}
.token.prefix.inserted,
.token.prefix.deleted {
  width: var(--eleventy-code-padding);
  background-color: rgba(0, 0, 0, 0.2);
}

/* Optional: full-width background color */
.token.inserted:not(.prefix),
.token.deleted:not(.prefix) {
  display: block;
  margin-left: calc(-1 * var(--eleventy-code-padding));
  margin-right: calc(-1 * var(--eleventy-code-padding));
  text-decoration: none; /* override del, ins, mark defaults */
  color: inherit; /* override del, ins, mark defaults */
}
.pdfviewer {
  margin-top: 2rem;
}

button {
  background-color: var(--primary);
  border: 0;
  border-radius: 6px;
  padding: 0.5rem;
  cursor: pointer;
}

button#zoomIn,
button#zoomOut {
  width: 2rem;
}
#map {
    height: 400px;
  }
    </style>
  </head>
  <body>
    <a href="#main" id="skip-link" class="visually-hidden">Skip to main content</a>

    <header>
      <a href="/eleventy-base-blog/" class="home-link">Nerdy Creativity</a>
      <nav>
        <h2 class="visually-hidden" id="top-level-navigation-menu">Top level navigation menu</h2>
        <ul class="nav">
            <li class="nav-item">
              <a href="/eleventy-base-blog/" aria-current="page">Home</a>
            </li>
            <li class="nav-item">
              <a href="/eleventy-base-blog/blog/">Archive</a>
            </li>
            <li class="nav-item">
              <a href="/eleventy-base-blog/about/">About Me</a>
            </li>
            <li class="nav-item">
              <a href="/eleventy-base-blog/projects/">Projects</a>
            </li>
        </ul>
      </nav>
    </header>

    <main id="main">
      







  <article class="post">
    <h1 class="post-title" id="adding-pdf-viewer-to-eleventy">
      <a href="/eleventy-base-blog/blog/2025-06-23-pdfviewer-eleventy/">Adding PDF viewer to Eleventy</a>
    </h1>

    <ul class="post-metadata">
      <li>
        <time datetime="2025-06-24">June 24, 2025</time>
      </li>
        <li>
          <a href="/eleventy-base-blog/tags/coding/" class="post-tag">coding</a>
        </li>
    </ul>

    <p>I wanted to add a PDF viewer to Eleventy using <a href="https://mozilla.github.io/pdf.js/">PDF.js</a>.</p>
<p>At first, I installed PDF.js from npm. However, the npm version only works on Firefox and Chrome. To get a version that works on Safari, I needed to use the legacy build version.</p>
<p>I cloned PDF.js repo and installed dependencies.</p>
<pre class="language-bash" tabindex="0"><code class="language-bash"><span class="token function">git</span> clone https://github.com/mozilla/pdf.js.git
<span class="token builtin class-name">cd</span> pdf.js
<span class="token function">npm</span> <span class="token function">install</span></code></pre>
<p>Then I built the legacy version.</p>
<pre class="language-bash" tabindex="0"><code class="language-bash">npx gulp generic-legacy</code></pre>
<p>This generated <code>pdf.js</code> and <code>pdf.worker.js</code> in the <code>build/generic-legacy/build/</code> directory. I copied <code>pdf.js</code> and <code>pdf.worker.js</code> to <code>/public/lib/pdfjs/generic-legacy/build</code>.</p>
<p>Then I put the code to create a viewer in <code>public/lib/pdfviewer.js</code>. The code is based on PDF.js <a href="https://jsfiddle.net/pdfjs/wagvs9Lf/">Prev/Next example</a> and <a href="https://github.com/mozilla/pdf.js/tree/master/examples/mobile-viewer">mobile viewer example</a>.</p>
<pre class="language-js" tabindex="0"><code class="language-js"><span class="token comment">// set workerSrc property</span>
pdfjsLib<span class="token punctuation">.</span>GlobalWorkerOptions<span class="token punctuation">.</span>workerSrc <span class="token operator">=</span>
  <span class="token string">"/lib/pdfjs/generic-legacy/build/pdf.worker.mjs"</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> pdfDoc <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> pageNum <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> pageRendering <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> pageNumPending <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> scale <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> canvas <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"the-canvas"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> ctx <span class="token operator">=</span> canvas<span class="token punctuation">.</span><span class="token function">getContext</span><span class="token punctuation">(</span><span class="token string">"2d"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">DEFAULT_SCALE_DELTA</span> <span class="token operator">=</span> <span class="token number">1.1</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">MIN_SCALE</span> <span class="token operator">=</span> <span class="token number">0.25</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token constant">MAX_SCALE</span> <span class="token operator">=</span> <span class="token number">10.0</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * Get page info from document, resize canvas accordingly, and render page.
 */</span>
<span class="token keyword">function</span> <span class="token function">renderPage</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>canvas <span class="token operator">==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token keyword">return</span><span class="token punctuation">;</span>

  pageRendering <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token comment">// Using promise to fetch the page</span>
  pdfDoc<span class="token punctuation">.</span><span class="token function">getPage</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">page</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> viewport <span class="token operator">=</span> page<span class="token punctuation">.</span><span class="token function">getViewport</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">scale</span><span class="token operator">:</span> scale <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// Support HiDPI-screens.</span>
    <span class="token keyword">var</span> outputScale <span class="token operator">=</span> window<span class="token punctuation">.</span>devicePixelRatio <span class="token operator">||</span> <span class="token number">1</span><span class="token punctuation">;</span>

    canvas<span class="token punctuation">.</span>width <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>viewport<span class="token punctuation">.</span>width <span class="token operator">*</span> outputScale<span class="token punctuation">)</span><span class="token punctuation">;</span>
    canvas<span class="token punctuation">.</span>height <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>viewport<span class="token punctuation">.</span>height <span class="token operator">*</span> outputScale<span class="token punctuation">)</span><span class="token punctuation">;</span>
    canvas<span class="token punctuation">.</span>style<span class="token punctuation">.</span>width <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>viewport<span class="token punctuation">.</span>width<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"px"</span><span class="token punctuation">;</span>
    canvas<span class="token punctuation">.</span>style<span class="token punctuation">.</span>height <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>viewport<span class="token punctuation">.</span>height<span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">"px"</span><span class="token punctuation">;</span>

    <span class="token keyword">var</span> transform <span class="token operator">=</span>
      outputScale <span class="token operator">!==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token punctuation">[</span>outputScale<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> outputScale<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

    <span class="token comment">// Render PDF page into canvas context</span>
    <span class="token keyword">var</span> renderContext <span class="token operator">=</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">canvasContext</span><span class="token operator">:</span> ctx<span class="token punctuation">,</span>
      <span class="token literal-property property">transform</span><span class="token operator">:</span> transform<span class="token punctuation">,</span>
      <span class="token literal-property property">viewport</span><span class="token operator">:</span> viewport<span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> renderTask <span class="token operator">=</span> page<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span>renderContext<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token comment">// Wait for rendering to finish</span>
    renderTask<span class="token punctuation">.</span>promise<span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      pageRendering <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>pageNumPending <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// New page rendering is pending</span>
        <span class="token function">renderPage</span><span class="token punctuation">(</span>pageNumPending<span class="token punctuation">)</span><span class="token punctuation">;</span>
        pageNumPending <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Update page counters</span>
  document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"page_num"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>textContent <span class="token operator">=</span> num<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * If another page rendering in progress, waits until the rendering is
 * finished. Otherwise, executes rendering immediately.
 */</span>
<span class="token keyword">function</span> <span class="token function">queueRenderPage</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>pageRendering<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    pageNumPending <span class="token operator">=</span> num<span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token function">renderPage</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Displays previous page.
 */</span>
<span class="token keyword">function</span> <span class="token function">onPrevPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>pageNum <span class="token operator">&lt;=</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  pageNum<span class="token operator">--</span><span class="token punctuation">;</span>
  <span class="token function">queueRenderPage</span><span class="token punctuation">(</span>pageNum<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Displays next page.
 */</span>
<span class="token keyword">function</span> <span class="token function">onNextPage</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>pageNum <span class="token operator">>=</span> pdfDoc<span class="token punctuation">.</span>numPages<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  pageNum<span class="token operator">++</span><span class="token punctuation">;</span>
  <span class="token function">queueRenderPage</span><span class="token punctuation">(</span>pageNum<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Zoom in
 */</span>
<span class="token keyword">function</span> <span class="token function">pdfViewZoomIn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> newScale <span class="token operator">=</span> scale<span class="token punctuation">;</span>
  newScale <span class="token operator">=</span> <span class="token punctuation">(</span>newScale <span class="token operator">*</span> <span class="token constant">DEFAULT_SCALE_DELTA</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  newScale <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">ceil</span><span class="token punctuation">(</span>newScale <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>
  newScale <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">min</span><span class="token punctuation">(</span><span class="token constant">MAX_SCALE</span><span class="token punctuation">,</span> newScale<span class="token punctuation">)</span><span class="token punctuation">;</span>
  scale <span class="token operator">=</span> newScale<span class="token punctuation">;</span>

  <span class="token function">queueRenderPage</span><span class="token punctuation">(</span>pageNum<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Zoom out
 */</span>
<span class="token keyword">function</span> <span class="token function">pdfViewZoomOut</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> newScale <span class="token operator">=</span> scale<span class="token punctuation">;</span>
  newScale <span class="token operator">=</span> <span class="token punctuation">(</span>newScale <span class="token operator">/</span> <span class="token constant">DEFAULT_SCALE_DELTA</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toFixed</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  newScale <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>newScale <span class="token operator">*</span> <span class="token number">10</span><span class="token punctuation">)</span> <span class="token operator">/</span> <span class="token number">10</span><span class="token punctuation">;</span>
  newScale <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span><span class="token constant">MIN_SCALE</span><span class="token punctuation">,</span> newScale<span class="token punctuation">)</span><span class="token punctuation">;</span>
  scale <span class="token operator">=</span> newScale<span class="token punctuation">;</span>

  <span class="token function">queueRenderPage</span><span class="token punctuation">(</span>pageNum<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">/**
 * Setup event handlers
 */</span>
<span class="token keyword">function</span> <span class="token function">setupEventHandlers</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> prevEl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"prev"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>prevEl<span class="token punctuation">)</span> prevEl<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> onPrevPage<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> nextEl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"next"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>nextEl<span class="token punctuation">)</span> nextEl<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> onNextPage<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> zoomInEl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"zoomIn"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>zoomInEl<span class="token punctuation">)</span> zoomInEl<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> pdfViewZoomIn<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">let</span> zoomOutEl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"zoomOut"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>zoomOutEl<span class="token punctuation">)</span> zoomOutEl<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">"click"</span><span class="token punctuation">,</span> pdfViewZoomOut<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">export</span> <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token parameter">url</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token function">setupEventHandlers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// download pdf</span>
  <span class="token keyword">var</span> loadingTask <span class="token operator">=</span> pdfjsLib<span class="token punctuation">.</span><span class="token function">getDocument</span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  pdfDoc <span class="token operator">=</span> <span class="token keyword">await</span> loadingTask<span class="token punctuation">.</span>promise<span class="token punctuation">;</span>

  <span class="token comment">// set page count</span>
  <span class="token keyword">let</span> countEl <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">"page_count"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>countEl<span class="token punctuation">)</span> countEl<span class="token punctuation">.</span>textContent <span class="token operator">=</span> pdfDoc<span class="token punctuation">.</span>numPages<span class="token punctuation">;</span>

  <span class="token comment">// render first page</span>
  <span class="token function">renderPage</span><span class="token punctuation">(</span>pageNum<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>I added a template file in <code>_includes/pdfviewer.njk</code>. <code>pdfviewer.njk</code> calls the <code>init()</code> from <code>pdfviewer.js</code> with <code>pdfUrl</code> and <code>pdfScale</code> arguments.</p>
<pre class="language-html" tabindex="0"><code class="language-html">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
  <span class="token punctuation">{</span>% include <span class="token string">"css/pdfviewer.css"</span> %<span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>section</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>pdfviewer<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>prev<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>previous page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Previous<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>next<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>next page<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Next<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zoomIn<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zoom in<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>+<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zoomOut<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>button<span class="token punctuation">"</span></span> <span class="token attr-name">title</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>zoom out<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>-<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span>
      <span class="token punctuation">></span></span>Page: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>page_num<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span> / <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>page_count<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span>
    <span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>the-canvas<span class="token punctuation">"</span></span> <span class="token special-attr"><span class="token attr-name">style</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token value css language-css"><span class="token property">border</span><span class="token punctuation">:</span> 1px solid black<span class="token punctuation">;</span></span><span class="token punctuation">"</span></span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>section</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>/lib/pdfjs/generic-legacy/build/pdf.mjs<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span>init<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'/pdfviewer.js'</span>
  <span class="token function">init</span><span class="token punctuation">(</span><span class="token string">'{{pdfUrl}}'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">{</span>pdfScale<span class="token punctuation">}</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

</code></pre>
<p>Then in the file I want to add a pdf, I included <code>pdfviewer.njk</code> and passed in the <code>pdfUrl</code>.</p>
<pre class="language-js" tabindex="0"><code class="language-js">
<span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">set</span> pdfUrl <span class="token operator">=</span> <span class="token string">'/pdfs/pcc-portfolio/inat_la_river.pdf'</span> <span class="token operator">%</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token operator">%</span> include <span class="token string">"pdfviewer.njk"</span> <span class="token operator">%</span><span class="token punctuation">}</span>
</code></pre>
<p>To adjust the size of the pdf, I passed in <code>pdfScale</code> argument. If it is not set, the value defaults to 1.</p>
<pre class="language-js" tabindex="0"><code class="language-js">
<span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">set</span> pdfUrl <span class="token operator">=</span> <span class="token string">'/pdfs/pcc-portfolio/inat_la_river.pdf'</span> <span class="token operator">%</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">set</span> pdfScale <span class="token operator">=</span> <span class="token string">'.4'</span> <span class="token operator">%</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token operator">%</span> include <span class="token string">"pdfviewer.njk"</span> <span class="token operator">%</span><span class="token punctuation">}</span>
</code></pre>
<p>Here's a PDF.</p>

<section class="pdfviewer">
  <div>
    <button id="prev" type="button" title="previous page">Previous</button>
    <span>Page: <span id="page_num"></span> / <span id="page_count"></span></span>
    <button id="next" type="button" title="next page">Next</button>
    <button id="zoomIn" type="button" title="zoom in">+</button>
    <button id="zoomOut" type="button" title="zoom out">â€“</button>
  </div>
<p><canvas id="the-canvas" style="border: 1px solid black;"></canvas></p>
</section>
<script src="/eleventy-base-blog/lib/pdfjs/generic-legacy/build/pdf.mjs" type="module"></script>


  </article>

  <hr class="separator">


  <article class="post">
    <h1 class="post-title" id="adding-leaflet-maps-to-eleventy">
      <a href="/eleventy-base-blog/blog/2025-06-22-leaflet-eleventy/">Adding Leaflet maps to Eleventy</a>
    </h1>

    <ul class="post-metadata">
      <li>
        <time datetime="2025-06-22">June 22, 2025</time>
      </li>
        <li>
          <a href="/eleventy-base-blog/tags/coding/" class="post-tag">coding</a>
        </li>
    </ul>

    <p>I wanted to find out how to add Leaflet maps to Eleventy, and I came across this post from <a href="https://cloudcannon.com/tutorials/eleventy-beginner-tutorial/eleventy-global-data-files/">Mike Neumegen at cloudcannon</a>. The code is kinda outdated, so I had to update some things.</p>
<p>First you create in <code>locations.json</code> file in the <code>_data</code> folder. <code>locations.json</code> is an array of locations</p>
<pre class="language-json" tabindex="0"><code class="language-json"><span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Kentucky Ridge State Forest"</span><span class="token punctuation">,</span>
    <span class="token property">"latitude"</span><span class="token operator">:</span> <span class="token string">"36.736700"</span><span class="token punctuation">,</span>
    <span class="token property">"longitude"</span><span class="token operator">:</span> <span class="token string">"-83.762480"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Amity Park"</span><span class="token punctuation">,</span>
    <span class="token property">"latitude"</span><span class="token operator">:</span> <span class="token string">"35.932640"</span><span class="token punctuation">,</span>
    <span class="token property">"longitude"</span><span class="token operator">:</span> <span class="token string">"-82.006000"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Mill Creek Park"</span><span class="token punctuation">,</span>
    <span class="token property">"latitude"</span><span class="token operator">:</span> <span class="token string">"40.030819"</span><span class="token punctuation">,</span>
    <span class="token property">"longitude"</span><span class="token operator">:</span> <span class="token string">"-122.115387"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"Willamette National Forest"</span><span class="token punctuation">,</span>
    <span class="token property">"latitude"</span><span class="token operator">:</span> <span class="token string">"44.058990"</span><span class="token punctuation">,</span>
    <span class="token property">"longitude"</span><span class="token operator">:</span> <span class="token string">"-122.484970"</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    <span class="token property">"name"</span><span class="token operator">:</span> <span class="token string">"The Mound"</span><span class="token punctuation">,</span>
    <span class="token property">"latitude"</span><span class="token operator">:</span> <span class="token string">"32.490819"</span><span class="token punctuation">,</span>
    <span class="token property">"longitude"</span><span class="token operator">:</span> <span class="token string">"-80.320408"</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span></code></pre>
<p>Then you add a file called <code>map.njk</code> in the <code>_includes</code> folder. <code>map.njk</code> has CDN links for Leaflet, html markup for the map, and the javacript code to create a Leaflet map.</p>
<pre class="language-html" tabindex="0"><code class="language-html">
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span>
  <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span>
  <span class="token attr-name">href</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/leaflet@1.9.4/dist/leaflet.css<span class="token punctuation">"</span></span>
  <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=<span class="token punctuation">"</span></span>
  <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span>
<span class="token punctuation">/></span></span>
<span class="token comment">&lt;!-- Make sure you put this AFTER Leaflet's CSS --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span>
  <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>https://unpkg.com/leaflet@1.9.4/dist/leaflet.js<span class="token punctuation">"</span></span>
  <span class="token attr-name">integrity</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=<span class="token punctuation">"</span></span>
  <span class="token attr-name">crossorigin</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span><span class="token punctuation">"</span></span>
<span class="token punctuation">></span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">"</span>map<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>style</span><span class="token punctuation">></span></span><span class="token style"><span class="token language-css">
  <span class="token selector">#map</span> <span class="token punctuation">{</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>style</span><span class="token punctuation">></span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token comment">// https://mozilla.github.io/nunjucks/templating.html#builtin-filters</span>
  <span class="token comment">// https://github.com/11ty/eleventy/issues/1158</span>

  <span class="token comment">// dump(2) will JSON.stringify markers object with 2 spaces.</span>
  <span class="token comment">// safe will ensure that the data is not escaped.</span>
  <span class="token keyword">let</span> markers <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">{</span> markers <span class="token operator">|</span> <span class="token function">dump</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token operator">|</span> safe <span class="token punctuation">}</span><span class="token punctuation">}</span>

  <span class="token comment">// create map</span>
  <span class="token keyword">const</span> map <span class="token operator">=</span> <span class="token constant">L</span><span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token string">'map'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token constant">L</span><span class="token punctuation">.</span><span class="token function">tileLayer</span><span class="token punctuation">(</span><span class="token string">'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span><span class="token literal-property property">attribution</span><span class="token operator">:</span> <span class="token string">'&amp;copy; &lt;a href="https://www.openstreetmap.org/copyright">OpenStreetMap&lt;/a> contributors'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">.</span><span class="token function">addTo</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// add location markers to map</span>
  <span class="token keyword">let</span> bounds <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> markers<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">const</span> marker <span class="token operator">=</span> <span class="token constant">L</span><span class="token punctuation">.</span><span class="token function">marker</span><span class="token punctuation">(</span><span class="token punctuation">[</span>markers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>latitude<span class="token punctuation">,</span> markers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>longitude<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">addTo</span><span class="token punctuation">(</span>map<span class="token punctuation">)</span><span class="token punctuation">;</span>
      marker<span class="token punctuation">.</span><span class="token function">bindPopup</span><span class="token punctuation">(</span>markers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
      bounds<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token punctuation">[</span>markers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>latitude<span class="token punctuation">,</span> markers<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span>longitude<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// adjust the map to show all location markers</span>
  map<span class="token punctuation">.</span><span class="token function">fitBounds</span><span class="token punctuation">(</span>bounds<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span>
</code></pre>
<p>Then in the file you want to add the map, include <code>map.njk</code> and pass in the markers data and the height of the map.</p>
<pre class="language-js" tabindex="0"><code class="language-js">
<span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">set</span> markers <span class="token operator">=</span> locations <span class="token operator">%</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token operator">%</span> <span class="token keyword">set</span> mapHeight <span class="token operator">=</span> <span class="token string">'400px'</span> <span class="token operator">%</span><span class="token punctuation">}</span>
<span class="token punctuation">{</span><span class="token operator">%</span> include <span class="token string">"map.njk"</span> <span class="token operator">%</span><span class="token punctuation">}</span>
</code></pre>
<p>Here's the map with markers.</p>
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="">
<!-- Make sure you put this AFTER Leaflet's CSS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
<div id="map"></div>



  </article>

  <hr class="separator">


  <article class="post">
    <h1 class="post-title" id="communicating-information-arcgis-dashboard-vs-arcgis-storymap">
      <a href="/eleventy-base-blog/blog/2025-06-20-dashboard-storymap/">Communicating Information - ArcGIS Dashboard vs ArcGIS StoryMap</a>
    </h1>

    <ul class="post-metadata">
      <li>
        <time datetime="2025-06-20">June 20, 2025</time>
      </li>
        <li>
          <a href="/eleventy-base-blog/tags/gis/" class="post-tag">GIS</a>, 
        </li>
        <li>
          <a href="/eleventy-base-blog/tags/pcc/" class="post-tag">PCC</a>
        </li>
    </ul>

    <p>For the final project of the Pasadena City College GEOG 115 Environmental Analysis with GIS class, students had the choice of creating a ArcGIS Dashboard or creating a ArcGIS StoryMap. Two students including myself choose to do dashboards, 18 students choose to do StoryMaps.</p>
<p>GIS is a technical subject. People are dealing with creating maps and charts to analyze an visualize geospatial data. Yet only two people were interested in creating dashboards to display that data. The rest wanted to tell a story with prose, images, and videos.</p>
<p>If storytelling is the preferred method of communicating for these geography students, then why do so many people in academic science research community deemphasized and discouraged
science communication to the general public?</p>

  </article>

  <hr class="separator">


  <article class="post">
    <h1 class="post-title" id="day-at-ucla-botany-gardens">
      <a href="/eleventy-base-blog/blog/2025-06-07-ucla-gardens/">Day at UCLA Botany Gardens</a>
    </h1>

    <ul class="post-metadata">
      <li>
        <time datetime="2025-06-07">June 07, 2025</time>
      </li>
        <li>
          <a href="/eleventy-base-blog/tags/plants/" class="post-tag">plants</a>, 
        </li>
        <li>
          <a href="/eleventy-base-blog/tags/life-long-learning/" class="post-tag">life-long learning</a>, 
        </li>
        <li>
          <a href="/eleventy-base-blog/tags/sketching/" class="post-tag">sketching</a>
        </li>
    </ul>

    <p>I spent the day at UCLA Mathias Botanical Garden. I went on a guided tour of the garden, attended a plant propagation class, and attended a drawing plants class. I also got unexpectedly got a chance to hang out with some friends, one of whom works at the gardens.</p>
<p>During the drawing class, one of the attendees asked for some tips about how to get started. She and her boyfriend had no experience drawing. I would rate my drawing skills as above stick figure level, but nowhere good enough do it as a career. I gave her some tips, and she commended me on my advice. Turns out she's a teacher so she noticed I focused on growth mindset and positive reinforcement, which is crucial to creating a good learning environment.</p>
<p>My friend who works at the Natural History Museum of Los Angeles County told me that some of the high schools students who attended the R coding workshop earlier this year actually used some of what they learned in their school presentation.</p>
<p>It was nice getting positive feedback about my teaching attempts. Yeah, I'm a better at informal education than I am at sketching or identifying plants and animals, and that's totally cool with me.</p>

  </article>

  <hr class="separator">


  <article class="post">
    <h1 class="post-title" id="my-first-python-class">
      <a href="/eleventy-base-blog/blog/2025-03-16-python-class/">My First Python class</a>
    </h1>

    <ul class="post-metadata">
      <li>
        <time datetime="2025-03-16">March 16, 2025</time>
      </li>
        <li>
          <a href="/eleventy-base-blog/tags/gis/" class="post-tag">GIS</a>, 
        </li>
        <li>
          <a href="/eleventy-base-blog/tags/pcc/" class="post-tag">PCC</a>
        </li>
    </ul>

    <p>As part of Pasadena City College's <a href="https://pasadena.edu/academics/divisions/natural-sciences/areas-of-study/gis.php">Geographic Information Systems and Technology certificate</a> program, I'm enrolled in CIS 012 Introduction to Programming
Using Python. This is the first time I've taken a programming class in college. Previously, I learned programming through reading books, watching videos, and doing projects.</p>
<p>Hardest part of the class is the professor lowers the grade on homework assignments if students uses code not covered in the class. I have to carefully review the lecture material so I don't accidentally use code that wasn't covered in the class. In other words, I have to do what the professor taught instead of doing what I know would work.</p>

  </article>

  <hr class="separator">





  <p>4 more posts can be found in <a href="/eleventy-base-blog/blog/">the archive</a>.</p>






    </main>

    <footer></footer>

    <!-- This page `/` was built on 2025-06-28T04:51:12.244Z -->
    <script type="module" src="/eleventy-base-blog/dist/3q_kko4FYy.js"></script>
  </body>
</html>
